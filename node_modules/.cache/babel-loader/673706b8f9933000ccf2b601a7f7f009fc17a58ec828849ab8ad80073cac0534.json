{"ast":null,"code":"// src/components/IncidentPage.js\nimport React,{useState,useEffect}from'react';import axios from'axios';import\"../src/incidentPage.css\";import MyForm from'./FormModel';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const IncidentPage=()=>{const[incidents,setIncidents]=useState([]);const[isModalOpen,setIsModalOpen]=useState(false);const[newData,setNewData]=useState(false);const[editData,setEditData]=useState([]);const[editable,setEditable]=useState(false);useEffect(()=>{const user=JSON.parse(localStorage.getItem(\"username\"));console.log(user);axios.get(\"http://localhost:8080/incident/list/\".concat(user)).then(response=>{console.log(response.data);setIncidents(response.data);}).catch(error=>{console.error('Error fetching incidents:',error);});},[newData]);function handleUser(){setIsModalOpen(true);}function handleEditIncident(data){setIsModalOpen(true);setEditData(data);setEditable(true);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Incident Management Page\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:handleUser,children:\"Create New Incident\"})})]}),isModalOpen&&/*#__PURE__*/_jsx(MyForm,{isModalOpen:isModalOpen,setIsModalOpen:setIsModalOpen,setNewData:setNewData,editData:editData,editable:editable,setEditable:setEditable}),/*#__PURE__*/_jsxs(\"table\",{className:\"styled-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Incident ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"IncidentPriority\"}),/*#__PURE__*/_jsx(\"th\",{children:\"IncidentReportDate\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Identifier\"}),/*#__PURE__*/_jsx(\"th\",{children:\"IncidentStatus\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ReporterName\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:incidents&&incidents.map(incident=>{const dateTimeString=incident.incidentReportDate;// Example date-time string\nconst date=new Date(dateTimeString);const year=date.getFullYear();const month=date.getMonth()+1;// Month is zero-indexed, so add 1\nconst day=date.getDate();const formattedDate=\"\".concat(day<10?'0':'').concat(day,\"-\").concat(month<10?'0':'').concat(month,\"-\").concat(year);// console.log(formattedDate); // Output: 2022-05-10\nreturn/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:incident.incidentId}),/*#__PURE__*/_jsx(\"td\",{children:incident.userData.userName}),/*#__PURE__*/_jsx(\"td\",{children:incident.userData.emailId}),/*#__PURE__*/_jsx(\"td\",{children:incident.userData.phoneNumber}),/*#__PURE__*/_jsx(\"td\",{children:incident.userData.address}),/*#__PURE__*/_jsx(\"td\",{children:incident.incidentPriority}),/*#__PURE__*/_jsx(\"td\",{children:formattedDate}),/*#__PURE__*/_jsx(\"td\",{children:incident.identifier}),/*#__PURE__*/_jsx(\"td\",{children:incident.incidentStatus}),/*#__PURE__*/_jsx(\"td\",{children:incident.reporterName}),incident.incidentStatus.toLowerCase()!==\"close\"?/*#__PURE__*/_jsx(\"td\",{onClick:()=>{handleEditIncident(incident);},style:{fontWeight:\"bold\",cursor:\"pointer\"},children:\"Edit\"}):/*#__PURE__*/_jsx(\"td\",{style:{fontWeight:\"bold\",cursor:\"not-allowed\"},children:\"Edit\"})]},incident.incidentId);})})]})]});};export default IncidentPage;","map":{"version":3,"names":["React","useState","useEffect","axios","MyForm","jsx","_jsx","jsxs","_jsxs","IncidentPage","incidents","setIncidents","isModalOpen","setIsModalOpen","newData","setNewData","editData","setEditData","editable","setEditable","user","JSON","parse","localStorage","getItem","console","log","get","concat","then","response","data","catch","error","handleUser","handleEditIncident","children","className","onClick","map","incident","dateTimeString","incidentReportDate","date","Date","year","getFullYear","month","getMonth","day","getDate","formattedDate","incidentId","userData","userName","emailId","phoneNumber","address","incidentPriority","identifier","incidentStatus","reporterName","toLowerCase","style","fontWeight","cursor"],"sources":["C:/Users/HarshNiranjan/Desktop/assignmentui/src/IncidentPage.js"],"sourcesContent":["// src/components/IncidentPage.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport \"../src/incidentPage.css\"\r\nimport MyForm from './FormModel';\r\n\r\nconst IncidentPage = () => {\r\n  const [incidents, setIncidents] = useState([]);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [newData, setNewData] = useState(false);\r\n  const [editData, setEditData] = useState([]);\r\n  const [editable, setEditable] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"username\"));\r\n    console.log(user)\r\n    axios.get(`http://localhost:8080/incident/list/${user}`)\r\n      .then(response => {\r\n        console.log(response.data)\r\n        setIncidents(response.data);\r\n      })\r\n      .catch(error => {\r\n        console.error('Error fetching incidents:', error);\r\n      });\r\n  }, [newData]);\r\n\r\n  function handleUser(){\r\n    setIsModalOpen(true);\r\n  }\r\n\r\n  function handleEditIncident(data){\r\n    setIsModalOpen(true);\r\n    setEditData(data);\r\n    setEditable(true);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className='top'>\r\n        <div></div>\r\n        <div><h2>Incident Management Page</h2></div>\r\n        <div><button className='btn' onClick={handleUser} >Create New Incident</button></div>\r\n      </div>\r\n\r\n      {isModalOpen && <MyForm isModalOpen={isModalOpen} setIsModalOpen={setIsModalOpen} setNewData={setNewData} editData={editData} editable={editable} setEditable={setEditable}  />}\r\n\r\n      <table className=\"styled-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>Incident ID</th>\r\n          <th>Username</th>\r\n          <th>Email</th>\r\n          <th>Phone Number</th>\r\n          <th>Address</th>\r\n          <th>IncidentPriority</th>\r\n          <th>IncidentReportDate</th>\r\n          <th>Identifier</th>\r\n          <th>IncidentStatus</th>\r\n          <th>ReporterName</th>\r\n          <th>Edit</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {incidents && incidents.map((incident) => {\r\n          const dateTimeString = incident.incidentReportDate; // Example date-time string\r\n          const date = new Date(dateTimeString);\r\n          \r\n          const year = date.getFullYear();\r\n          const month = date.getMonth() + 1; // Month is zero-indexed, so add 1\r\n          const day = date.getDate();\r\n          \r\n          const formattedDate = `${day < 10 ? '0' : ''}${day}-${month < 10 ? '0' : ''}${month}-${year}`;\r\n          \r\n          // console.log(formattedDate); // Output: 2022-05-10\r\n\r\n         return  <tr key={incident.incidentId}>\r\n            <td>{incident.incidentId}</td>\r\n            <td>{incident.userData.userName}</td>\r\n            <td>{incident.userData.emailId}</td>\r\n            <td>{incident.userData.phoneNumber}</td>\r\n            <td>{incident.userData.address}</td>\r\n            <td>{incident.incidentPriority}</td>\r\n            <td>{formattedDate}</td>\r\n            <td>{incident.identifier}</td>\r\n            <td>{incident.incidentStatus}</td>\r\n            <td>{incident.reporterName}</td>\r\n            {incident.incidentStatus.toLowerCase() !== \"close\" ? <td onClick={()=>{handleEditIncident(incident)}} style={{fontWeight:\"bold\", cursor:\"pointer\"}}>Edit</td> : <td style={{fontWeight:\"bold\", cursor:\"not-allowed\"}}>Edit</td>}\r\n          </tr>\r\n        })}\r\n      </tbody>\r\n    </table>\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IncidentPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}